<%- include('layouts/layout', { title: 'Way to Texas Papa' , head: '' , activePage: 'brand' , body: ` <main
    class="sub-page location-page">

    <section class="location-intro">
        <div class="location-container">
            <div class="location-header fade-up">
                <span class="sub-title">LOCATION</span>
                <h1 class="main-title">오시는 길</h1>
            </div>

            <!-- 지도 영역 -->
            <div class="map-section fade-up">
                <div id="map"></div>
                <!-- API 키 미등록 시 안내 문구 -->
                <div id="map-placeholder"
                    style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; display: none;">
                    <p style="color: #999; font-size: 1.1rem; margin-bottom: 10px;">카카오 지도 API 키 등록이 필요합니다.</p>
                    <small style="color: #ccc;">(location.ejs 파일의 스크립트 부분을 확인해주세요)</small>
                </div>
            </div>

            <!-- 정보 그리드 -->
            <div class="location-info-grid">
                <!-- 주소 및 연락처 -->
                <div class="info-card fade-up">
                    <i class="fas fa-map-marker-alt"></i>
                    <h3>Contact Info</h3>
                    <p>텍사스 파파 본사로 오시는 길입니다.</p>
                    <ul class="detail-list">
                        <li>
                            <span class="label">ADD</span>
                            <span>서울특별시 강남구 테헤란로 (상세주소 입력)</span>
                        </li>
                        <li>
                            <span class="label">TEL</span>
                            <span>1588-0000</span>
                        </li>
                        <li>
                            <span class="label">TIME</span>
                            <span>평일 09:00 - 18:00 (주말/공휴일 휴무)</span>
                        </li>
                    </ul>
                </div>

                <!-- 지하철 이용 시 -->
                <div class="info-card fade-up">
                    <i class="fas fa-subway"></i>
                    <h3>Subway</h3>
                    <p>대중교통을 이용하시면 더욱 편리합니다.</p>
                    <ul class="detail-list">
                        <li>
                            <span class="label">2호선</span>
                            <span>강남역 1번 출구 도보 5분 거리</span>
                        </li>
                        <li>
                            <span class="label">9호선</span>
                            <span>언주역 4번 출구 도보 10분 거리</span>
                        </li>
                    </ul>
                </div>

                <!-- 버스 이용 시 -->
                <div class="info-card fade-up">
                    <i class="fas fa-bus"></i>
                    <h3>Bus</h3>
                    <p>인근 버스 정류장을 안내해 드립니다.</p>
                    <ul class="detail-list">
                        <li>
                            <span class="label">간선</span>
                            <span>146, 341, 360, 740 (강남역 정류장)</span>
                        </li>
                        <li>
                            <span class="label">지선</span>
                            <span>3412, 4412 (테헤란로 정류장)</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    </main>

    <!-- 카카오 지도 API (발급받은 JavaScript 키를 입력하세요) -->
    <script type="text/javascript"
        src="//dapi.kakao.com/v2/maps/sdk.js?appkey=6cfe1538ff177afffbb05683d64b8188&libraries=services"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const mapContainer = document.getElementById('map');
            const placeholder = document.getElementById('map-placeholder');

            // API 키가 입력되지 않은 경우 체크 (YOUR_KAKAO_JS_KEY 인지 확인)
            const scriptTag = document.querySelector('script[src*="dapi.kakao.com"]');
            if (scriptTag && scriptTag.src.includes('YOUR_KAKAO_JS_KEY')) {
                placeholder.style.display = 'block';
                return;
            }

            // 카카오맵 로드 대기 및 초기화
            kakao.maps.load(() => {
                const mapOption = {
                    center: new kakao.maps.LatLng(37.514575, 127.106503), // 기본 좌표 (잠실역 부근)
                    level: 3
                };

                const map = new kakao.maps.Map(mapContainer, mapOption);

                // 컨트롤 추가
                const mapTypeControl = new kakao.maps.MapTypeControl();
                map.addControl(mapTypeControl, kakao.maps.ControlPosition.TOPRIGHT);

                const zoomControl = new kakao.maps.ZoomControl();
                map.addControl(zoomControl, kakao.maps.ControlPosition.RIGHT);

                // 주소-좌표 변환 객체를 생성합니다
                const geocoder = new kakao.maps.services.Geocoder();
                const targetAddress = '서울특별시 송파구 오금로 11길 55';

                // 주소로 좌표를 검색합니다
                geocoder.addressSearch(targetAddress, function (result, status) {
                    // 정상적으로 검색이 완료됐으면 
                    if (status === kakao.maps.services.Status.OK) {
                        const coords = new kakao.maps.LatLng(result[0].y, result[0].x);

                        // 결과값으로 받은 위치를 마커로 표시합니다
                        const marker = new kakao.maps.Marker({
                            map: map,
                            position: coords
                        });

                        // 인포윈도우로 장소에 대한 설명을 표시합니다
                        const infowindow = new kakao.maps.InfoWindow({
                            content: '<div style="width:150px;text-align:center;padding:6px 0;">텍사스파파</div>'
                        });
                        infowindow.open(map, marker);

                        // 지도의 중심을 결과값으로 받은 위치로 이동시킵니다
                        map.setCenter(coords);

                        // 반응형 윈도우 리사이즈 대응
                        window.addEventListener('resize', () => {
                            map.setCenter(coords);
                        });
                    }
                });
            });
        });
    </script>
    `
    }) %>