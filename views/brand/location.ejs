<%- include('../layouts/layout', { title: '오시는 길 - 텍사스파파' , head: '' , activePage: 'brand' , body: ` <main
    class="sub-page location-page">
    <section class="location-intro">
        <div class="location-container">
            <div class="location-header fade-up">
                <span class="sub-title">LOCATION</span>
                <h1 class="main-title">오시는 길</h1>
            </div>

            <!-- 지도 영역 -->
            <div class="map-section">
                <div id="map"></div>
                <div id="map-placeholder"
                    style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; display: none;">
                    <p style="color: #999; font-size: 1.1rem; margin-bottom: 10px;">카카오 지도 API 키 등록이 필요합니다.</p>
                    <small style="color: #ccc;">(location.ejs 파일의 스크립트 부분을 확인해주세요)</small>
                </div>
            </div>

            <!-- 정보 그리드 -->
            <div class="location-info-grid">
                <div class="info-card fade-up">
                    <i class="fas fa-map-marker-alt"></i>
                    <h3>Contact Info</h3>
                    <p>텍사스 파파 본사로 오시는 길입니다.</p>
                    <ul class="detail-list">
                        <li>
                            <span class="label">ADD</span>
                            <span class="addr-text">서울특별시 송파구 오금로 11길 55 (방이동 43-7)</span>
                            <button onclick="copyAddress('서울특별시 송파구 오금로 11길 55', this)" class="inline-copy-btn"
                                title="주소 복사">
                                <i class="fas fa-copy"></i>
                            </button>
                        </li>
                        <li>
                            <span class="label">TEL</span>
                            <span>02-421-2333</span>
                        </li>
                        <li>
                            <span class="label">TIME</span>
                            <span>평일 09:00 - 18:00 (주말/공휴일 휴무)</span>
                        </li>
                    </ul>
                </div>

                <div class="info-card fade-up">
                    <i class="fas fa-subway"></i>
                    <h3>Subway</h3>
                    <p>대중교통을 이용하시면 더욱 편리합니다.</p>
                    <ul class="detail-list">
                        <li>
                            <span class="label">8호선</span>
                            <span>몽촌토성역 3번 출구 도보 8분</span>
                        </li>
                        <li>
                            <span class="label">9호선</span>
                            <span>한성백제역 1번 출구 도보 10분</span>
                        </li>
                    </ul>
                </div>

                <div class="info-card fade-up">
                    <i class="fas fa-bus"></i>
                    <h3>Bus</h3>
                    <p>인근 버스 정류장을 안내해 드립니다.</p>
                    <ul class="detail-list">
                        <li>
                            <span class="label">간선</span>
                            <span>341, 331, 333 (방이역 정류장)</span>
                        </li>
                        <li>
                            <span class="label">지선</span>
                            <span>3216, 3414 (오금로 정류장)</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </section>
    </main>

    <script type="text/javascript"
        src="//dapi.kakao.com/v2/maps/sdk.js?appkey=32d21192c59a01f88208043771e1a27d&libraries=services&autoload=false"></script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const mapContainer = document.getElementById('map');
            const placeholder = document.getElementById('map-placeholder');

            gsap.to('.fade-up', { opacity: 1, y: 0, duration: 1, stagger: 0.2, ease: 'power3.out' });

            window.copyAddress = function (text, btn) {
                const tempInput = document.createElement('input');
                tempInput.value = text;
                document.body.appendChild(tempInput);
                tempInput.select();
                document.execCommand('copy');
                document.body.removeChild(tempInput);

                const originalHtml = btn.innerHTML;
                btn.classList.add('success');
                btn.innerHTML = '<i class="fas fa-check"></i>';
                if (!btn.classList.contains('inline-copy-btn')) {
                    btn.innerHTML = '<i class="fas fa-check"></i> 복사됨';
                }

                setTimeout(() => {
                    btn.classList.remove('success');
                    btn.innerHTML = originalHtml;
                }, 2000);
            };

            if (typeof kakao === 'undefined') {
                console.error('카카오 지도 SDK가 로드되지 않았습니다. API 키와 스크립트 경로를 확인해주세요.');
                if (placeholder) placeholder.style.display = 'block';
                return;
            }

            kakao.maps.load(() => {
                console.log('카카오 지도 API 로드 완료');
                window.targetAddr = '서울특별시 송파구 오금로 11길 55';
                const geocoder = new kakao.maps.services.Geocoder();

                geocoder.addressSearch(window.targetAddr, function (result, status) {
                    if (status === kakao.maps.services.Status.OK) {
                        console.log('주소 검색 성공:', result[0].x, result[0].y);
                        const coords = new kakao.maps.LatLng(result[0].y, result[0].x);

                        const mapOption = { center: coords, level: 3 };
                        const map = new kakao.maps.Map(mapContainer, mapOption);
                        map.addControl(new kakao.maps.MapTypeControl(), kakao.maps.ControlPosition.TOPRIGHT);
                        map.addControl(new kakao.maps.ZoomControl(), kakao.maps.ControlPosition.RIGHT);

                        // 커스텀 마커 이미지
                        const imageSrc = '/images/logo.png',
                            imageSize = new kakao.maps.Size(50, 50),
                            imageOption = { offset: new kakao.maps.Point(25, 50) };

                        const markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize, imageOption);
                        const marker = new kakao.maps.Marker({
                            map: map,
                            position: coords,
                            image: markerImage
                        });

                        const content = '<div class="custom-overlay">' +
                            '<div class="overlay-header">' +
                            '<span class="overlay-title">' +
                            '<i class="fas fa-location-dot"></i> 텍사스파파 본사' +
                            '</span>' +
                            '</div>' +
                            '<div class="overlay-address">' +
                            '서울특별시 송파구 오금로 11길 55<br>(방이동 43-7)' +
                            '</div>' +
                            '<div class="overlay-actions">' +
                            '<a href="https://map.kakao.com/link/to/텍사스파파,' + result[0].y + ',' + result[0].x + '" target="_blank" class="overlay-btn btn-directions">' +
                            '<i class="fas fa-route"></i> 길찾기' +
                            '</a>' +
                            '<button onclick="copyAddress(window.targetAddr, this)" class="overlay-btn btn-copy">' +
                            '<i class="fas fa-copy"></i> 주소복사' +
                            '</button>' +
                            '</div>' +
                            '</div>';

                        new kakao.maps.CustomOverlay({
                            content: content,
                            map: map,
                            position: coords,
                            yAnchor: 1.15
                        });

                        map.setCenter(coords);
                        window.addEventListener('resize', () => map.setCenter(coords));
                    } else {
                        console.error('주소 검색 실패:', status);
                    }
                });
            });
        });
    </script>
    ` }) %>